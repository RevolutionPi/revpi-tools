# SPDX-License-Identifier: GPL-2.0-or-later
#
# SPDX-FileCopyrightText: 2024 KUNBUS GmbH

variables:
  # buster is based on the 2.x branch
  # bullseye is based on the 3.x branch
  # bookworm is based on master
  SKIP_RELEASE_PATTERN: /buster|bookworm/

# Build a snapshot debian package from current master
include:
  - project: "revolutionpi/infrastructure/ci-templates"
    file: "base.yml"
  - project: "revolutionpi/infrastructure/ci-templates"
    file: "package-devel.yml"
  - project: "revolutionpi/infrastructure/ci-templates"
    file: "/reuse-lint.yml"
  - local: debian/gitlab-ci.yml
    rules:
      - if: $CI_COMMIT_BRANCH =~ /^(raspios|debian)\/.*/
        exists:
          - debian/gitlab-ci.yml
