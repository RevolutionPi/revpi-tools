revpi-tools (4.5.2-1+deb12+1) bookworm; urgency=medium

  * fix(revpi-config): don't let Bluetooth toggle WLAN

 -- Thomas Böhler <t.boehler@kunbus.com>  Mon, 01 Sep 2025 15:02:27 +0200

revpi-tools (4.5.1-1+deb12+1) bookworm; urgency=medium

  * fix(factory-reset): check first if ran before
  * test(factory-reset): minimal output if run before
  * fix(revpi-config): update NetworkManager state
  * feat(revpi-config): check if WLAN country is set

 -- Thomas Böhler <t.boehler@kunbus.com>  Mon, 11 Aug 2025 14:59:17 +0200

revpi-tools (4.5.0-1+deb12+1) bookworm; urgency=medium

  [ Thomas Böhler ]
  * build: failed tests fail the CMake tests as well
  * feat(factory-reset): prepare for tests
  * test(factory-reset): add HAT EEPROM test
  * fix(factory-reset): Exit early if flag set
  * build: copy revpi-functions to builddir
  * test(factory-reset): add test for hostname prefix
  * test(factory-reset): skip if state file present
  * test(factory-reset): test for default hostname
  * test(factory-reset): check for created state file

  [ Ramiro Gsponer ]
  * feat: Add function to set WiFi country code
  * feat: Use global CMDLINE variable for path
  * feat: Add get_wifi_country function
  * fix: Update wifi country settings functions
  * revert: "feat: Add function to set WiFi country code"

  [ Marc Kittner ]
  * feat: Remove sudoers rule for revpi-factory-reset
  * test(factory-reset): add test to rm sudoers file

  [ Thomas Böhler ]
  * test(factory-reset): remove missing sudoers file

 -- Thomas Böhler <t.boehler@kunbus.com>  Tue, 29 Jul 2025 15:42:47 +0200

revpi-tools (4.4.1-1+deb12+1) bookworm; urgency=medium

  [ Sven Sager ]
  * fix(firstboot): Ensure cache is written to disk after ssh key generation

 -- Thomas Böhler <t.boehler@kunbus.com>  Fri, 24 Jan 2025 10:46:29 +0100

revpi-tools (4.4.0-1+deb12+1) bookworm; urgency=medium

  [ Sven Sager ]
  * fix(firstboot): Add dependency to reboot.target in unit file
  * fix(factory-reset): Write error and warning messages to stderr

  [ Thomas Böhler ]
  * build: integrate kyua testing into CMake
  * fix(factory-reset): give timeout more context
  * refactor(set-mac): add usage function
  * feat(set-mac): print usage on wrong device type
  * fix(set-mac): compute datadir
  * fix(factory-reset): compute datadir and sysconfdir
  * build: use CMAKE_CURRENT_{SOURCE,BINARY}_DIR
  * build: install factory-reset files with good perms
  * build: loop over all eeprom hex files
  * fix(set-mac): quote expanded variables

  [ Sven Sager ]
  * fix(firstboot): Combine first boot jobs in the firstboot.service file
  * fix(firstboot): Execute tasks in the right order in boot process

  [ Thomas Böhler ]
  * refactor(factory-reset): rewrite man page in scdoc
  * doc(factory-reset): rewrite man page
  * feat(factory-reset): allow custom hostname prefix
  * doc(factory-reset): mention custom hostname prefix
  * build: install revpi-factory-reset.8 from bindir

 -- Thomas Böhler <t.boehler@kunbus.com>  Thu, 16 Jan 2025 11:48:28 +0100

revpi-tools (4.3.1-1+deb12+1) bookworm; urgency=medium

  * doc(revpi-set-mac): list device types in man page
  * doc(revpi-config): improve SYNOPSIS readability
  * doc(man-pages): underline replaceable text
  * doc(revpi-set-mac): add FILES section
  * fix(lan743x): expand binary to 512 bytes

 -- Thomas Böhler <t.boehler@kunbus.com>  Tue, 26 Nov 2024 14:31:00 +0100

revpi-tools (4.3.0-1+deb12+1) bookworm; urgency=medium

  [ Ahmad Arabi Katbi ]
  * feat!: Remove perf-governer
  * feat!: Remove downclock-cpu for clock handling
  * doc(manpage): Convert manpage to scdoc format

  [ Nicolai Buchwitz ]
  * fix: Simplify bluetooth status detection

  [ Thomas Böhler ]
  * fix(deb): add dphys-swapfile to suggests

  [ Nicolai Buchwitz ]
  * feat(revpi-config): Simplify detection of Connect
  * feat(revpi-config): Add support for Connect 5

 -- Sven Sager <s.sager@kunbus.com>  Mon, 11 Nov 2024 09:29:40 +0100

revpi-tools (4.2.2-1+revpi12+1) bookworm; urgency=medium

  * fix(pibridge): Move files to -base-files
  * feat(deb): Break on revpi-base-files < 0.4.0
  * fix(deb): Depend on raspi-utils

 -- Nicolai Buchwitz <n.buchwitz@kunbus.com>  Thu, 11 Jul 2024 13:41:29 +0200

revpi-tools (4.2.1-1+revpi12+1) bookworm; urgency=medium

  [ Ramiro Gsponer ]
  * fix(factory-reset): remove dependency for user pi
  * chore: Update copyright date
  * chore(factory-reset): Update factory reset path

  [ Thomas Böhler ]
  * fix(pibridge): pibridge.conf moves to base-files
  * feat(deb): Break on revpi-base-files < 0.3.0

 -- Thomas Böhler <t.boehler@kunbus.com>  Fri, 28 Jun 2024 09:57:05 +0200

revpi-tools (4.2.0-1+revpi12+1) bookworm; urgency=medium

  [ Thomas Böhler ]
  * fix(deb): Mention present parts in description
  * doc(deb): Update copyright years
  * ci: Add commit linting
  * ci: udev is no longer needed to build revpi-tools
  * fix(factory-reset): Make scripts executable
  * doc: Rewrite ks8851-set-mac(8) in scdoc syntax
  * build: Install man pages in loop
  * doc: Rewrite pibridge-shutdown(8) in scdoc syntax
  * doc: Add man page for lan743x-set-mac
  * doc: Add man page for lan78xx-set-mac
  * doc: Add man page for lan95xx-set-mac
  * doc: Add man page for revpi-set-mac
  * ci: Add scdoc dependency for building

  [ Philipp Rosenberger ]
  * fix: Install lan743x.bin

  [ Thomas Böhler ]
  * feat: Make resize-fs.sh testable
  * test: Add tests with kyua for resize-fs.sh
  * fix: Don't hard code last partition for resize
  * ci: Add CI job for kyua tests
  * fix(firstboot): Always resize fs
  * feat: Regenerate SSH host keys on boot
  * build: Fix man page source

  [ Nicolai Buchwitz ]
  * refactor(factory-reset): Use echo, not printf
  * feat(factory-reset): Use global state file
  * feat(factory-reset): Set password if user present

  [ Thomas Böhler ]
  * feat(deb): Add scdoc build dependency

 -- Thomas Böhler <t.boehler@kunbus.com>  Fri, 21 Jun 2024 13:55:04 +0200

revpi-tools (4.1.0-1+revpi12+1) bookworm; urgency=medium

  [ Nicolai Buchwitz ]
  * feat(tools): Add tooling for lan7430 controller
  * feat(revpi-config): Add support for mwifiex device
  * feat(revpi-config): Add bt support for Flat S

  [ Thomas Böhler ]
  * refactor(factory-reset): Introduce RPI_FW_BOOT
  * fix: Use /boot/firmware instead of /boot

 -- Thomas Böhler <t.boehler@kunbus.com>  Mon, 11 Mar 2024 07:51:28 +0100

revpi-tools (4.0.0-1+revpi12+2) bookworm; urgency=medium

  * Update changelog for 4.0.0-1+revpi12+1 release
  * fix(deb): Add dependency systemd again

 -- Thomas Böhler <t.boehler@kunbus.com>  Wed, 07 Feb 2024 11:51:10 +0100

revpi-tools (4.0.0-1+revpi12+1) bookworm; urgency=medium

  [ Thomas Böhler ]
  * fix(revpi-factory-reset): Do not remove sshwarn

  [ Philipp Rosenberger ]
  * Switch back to the debian/ namespace

  [ Ramiro Gsponer ]
  * fix: Vcs-Git Url in debian/control
  * fix: Source Url in debian/copyright
  * chore: Update files to reflect the move to gitlab

  [ Nicolai Buchwitz ]
  * docs(revpi-config): Make "see also" the last item

  [ Thomas Böhler ]
  * fix(udev): Always assign Connect4 eth1

  [ Thomas Böhler ]
  * chore: Add license information for REUSE

  [ Nicolai Buchwitz ]
  * feat(udev): Add rules for RevPi Flat S 2022

  [ Thomas Böhler ]
  * feat!(avahi): Move avahi files to base-files
  * feat!(systemd): Move systemd files to base-files
  * feat!(udev): Move udev files to base-files
  * fix(deb): Remove dependencies systemd and udev

 -- Thomas Böhler <t.boehler@kunbus.com>  Wed, 07 Feb 2024 08:02:14 +0100

revpi-tools (3.3.2-1+revpi12+1) bookworm; urgency=medium

  * Update package for bookworm

 -- Thomas Böhler <t.boehler@kunbus.com>  Fri, 13 Oct 2023 10:31:19 +0200

revpi-tools (3.3.2-1+revpi11+1) bullseye; urgency=medium

  [ Thomas Böhler ]
  * ci: Add GitLab CI manifest

  [ Nicolai Buchwitz ]
  * fix(revpi-config): Fix compute module detection

  [ Philipp Rosenberger ]
  * refactor(revpi-config): Cleanup the indentation
  * chore(revpi-config): Address SC2004: $/${} is unnecessary on arithmetic variables
  * chore(revpi-config): Address SC2086: Double quote to prevent globbing and word splitting
  * chore(revpi-config): Address SC2181: Check exit code directly
  * chore(revpi-config)!: Drop a workaround for Jessie

  [ Thomas Böhler ]
  * fix: Add dependency `whiptail` for factory-reset

  [ Nicolai Buchwitz ]
  * ci: Run cmake test build only on MR
  * ci: Run publish stage too

  [ Philipp Rosenberger ]
  * fix(udev): Make ttyRS485 symlinking more robust on Connect 4
  * fix(udev): Make ttyRS485 symlinking more robust on Flat
  * fix(udev): Make ttyRS485 symlinking more robust on Compact

  [ Thomas Böhler ]
  * chore: Add move to GitLab to README
  * fix: Remove setting the static machine-id

 -- Thomas Böhler <t.boehler@kunbus.com>  Mon, 18 Sep 2023 16:17:47 +0200

revpi-tools (3.3.1-1+revpi11+1) bullseye; urgency=medium

  [ Nicolai Buchwitz ]
  * ci: Add pipeline for package builds
  * ci: Exclude buster from master snapshot packages

  [ Philipp Rosenberger ]
  * Drop systemd-timesyncd-override-available()
  * udev: Use the same order in all rules: DEVPATH, SUBSYSTEM, ATTR, ...
  * udev: Add a rule for eth0 on Core 3(+)/S(E)
  * udev: Add a rule for eth0 and eth1 on Connect(+)/S(E)
  * udev: Add a rule for eth0 and wlan0 on Connect 4
  * udev: Add a rule for eth0 on Compact
  * udev: Add a rule for eth0 and eth1 on Flat

 -- Philipp Rosenberger <p.rosenberger@kunbus.com>  Fri, 28 Jul 2023 13:00:53 +0200

revpi-tools (3.3.0-1+revpi11+1) bullseye; urgency=medium

  [ Nicolai Buchwitz ]
  * fix(revpi-config): Repair dtparam handling
  * feat(revpi-config): Enable perf-governor and downclock-cpu for CM4 too

 -- Thomas Böhler <t.boehler@kunbus.com>  Fri, 21 Jul 2023 11:53:42 +0200

revpi-tools (3.2.0-1+revpi11+1) bullseye; urgency=medium

  [ Sven Sager ]
  * fix(revpi-config): Set correct order for systemctl for enable / disable
    a service file
  * feat(revpi-config): Control antenna use on a cm4 module
  * feat(revpi-config): Enable and Disable AVAHI daemon

  [ Thomas Böhler ]
  * refactor: Use rpi_type() for is_cm3() as well

 -- Sven Sager <s.sager@kunbus.com>  Tue, 18 Jul 2023 15:40:53 +0200

revpi-tools (3.1.3-1+revpi11+1) bullseye; urgency=medium

  * fix: Ensure that pileft and piright are brought up

 -- Nicolai Buchwitz <n.buchwitz@kunbus.com>  Thu, 13 Jul 2023 13:10:28 +0200

revpi-tools (3.1.2-1+revpi11+1) bullseye; urgency=medium

  [ Nicolai Buchwitz ]
  * fix(udev): Remove systemd tag for hdmi-disable rule

 -- Thomas Böhler <t.boehler@kunbus.com>  Wed, 21 Jun 2023 09:42:43 +0200

revpi-tools (3.1.1-1+revpi11+1) bullseye; urgency=medium

  * firstboot: Use pkg-config for services install path
  * firstboot: Fix potential race condition in the service file

 -- Philipp Rosenberger <p.rosenberger@kunbus.com>  Wed, 24 May 2023 18:02:12 +0200

revpi-tools (3.1.0-1+revpi11+1) bullseye; urgency=medium

  [ Sven Sager ]
  * docs: Update resize-fs script documentation

  [ Philipp Rosenberger ]
  * Build the eeprom file in the correct subdirectory
  * Fix issue with ethtool from Bullseye
  * Add a script to write the eeprom of the network devices
  * Add support to flash the eeprom of  LAN7800 devices

  [ Nicolai Buchwitz ]
  * Merge KS8851 mac address tool into revpi-set-mac

  [ Holger Jorra ]
  * Add script to set MAC addresses on Connect4
  * Fix Connect4 MAC addresses with udev rule
  * Apply GNUInstallDirs to udev rule

  [ Philipp Rosenberger ]
  * build: Use pkg-config for services install path
  * build: Use pkg-config to install udev rules
  * Add systemd, udev and pkg-config to Build-Depends

 -- Philipp Rosenberger <p.rosenberger@kunbus.com>  Wed, 24 May 2023 17:46:30 +0200

revpi-tools (3.0.1-1+revpi11+1) bullseye; urgency=medium

  * fix: Set execute permission to script files
  * fix: use PROGRAM instead of FILE in CMakeLists.txt for scripts

 -- Sven Sager <s.sager@kunbus.com>  Sat, 22 Apr 2023 16:56:50 +0200

revpi-tools (3.0.0-1+revpi11+1) bullseye; urgency=medium

  [ Philipp Rosenberger ]
  * Use GNUInstallDirs cmake-module to define install location
  * Build lan9514.bin in the build directory
  * Remove useless newlines at the file ends
  * Move license files to the LICENSES dir

  [ Ramiro Gsponer ]
  * Fix license copyright
  * Reorder added subdirectories alphabetically
  * Add revpi-ssh.service
  * Update CMakeLists for avahi-services
  * Delete resize root partition from revpi-factory-reset
  * Add bash script for firstboot with resize root partition
  * Add unit file for firstboot.service
  * Update CMakeLists for firstboot.service
  * Update license copyright

  [ Frank Erdrich ]
  * Add Connect 4 to udev rules.

  [ Sven Sager ]
  * Change call of systemd-machine-id-setup

  [ Ramiro Gsponer ]
  * Import revpi-config files from webstatus
  * Update CMakeLists for revpi-config

  [ Holger Jorra ]
  * Move watchdog example away from home folder
  * Move EEPROM patch away from home folder
  * Remove C++ dependency from project

  [ Nicolai Buchwitz ]
  * Remove buster fixups
  * Remove dependency to sosreport
  * Suggest revpi-sos-report
  * Remove revpi-sos

  [ Ramiro Gsponer ]
  * Set upstream-branch value in gbp.conf to master

  [ Sven Sager ]
  * fix: Install revpi-config to /usr/bin

  [ Nicolai Buchwitz ]
  * ConBridge is not available on RevPi Connect 4
  * RevPi Connect 4 has bluetooth and WLAN too
  * Use /proc/device-tree instead of /sys/firmware/ ...

  [ Ramiro Gsponer ]
  * Update control file with dependency for avahi service
  * Add conflict with old webstatus version

  [ Sven Sager ]
  * Removes override_dh_fixperms from control file
  * Updates the year in the copyright file

 -- Sven Sager <s.sager@kunbus.com>  Sun, 16 Apr 2023 14:40:40 +0200

revpi-tools (2.0.1-1+revpi11+1) bullseye; urgency=medium

  * Fix an upgrade issue when using apt-get upgrade

 -- Philipp Rosenberger <p.rosenberger@kunbus.com>  Wed, 11 Jan 2023 14:38:35 +0100

revpi-tools (2.0.1-1) buster; urgency=medium

  [ Nicolai Buchwitz ]
  * Fix broken function names to repair X login

 -- Sven Sager <s.sager@kunbus.com>  Fri, 23 Dec 2022 16:16:02 +0100

revpi-tools (2.0.0-1) buster; urgency=medium

  [ Zhi Han ]
  * Add support for Core (2022)
  * Add support for Core S (2022)
  * Change match string for Core SE (2022)
  * Power off display for Flat in udev

  [ Nicolai Buchwitz ]
  * Fix missing systemd tag
  * Change deb architecture to any

  [ Zhi Han ]
  * sos: Add revpi device information (from HAT EEPROM)
  * Add dependency to python3-revpi-device-info
  * Delete needless debhelper log
  * Convert debianized installation to cmake
  * Move example code to examples-watchdog/
  * Move udev rules to directory udev/
  * Move systemd files to systemd/
  * Move sosreport files to revpi-sos/
  * Move fixup scripts to fixup/
  * Move pibridge-shutdown to tools/
  * Delete debianization files from master
  * Import hdmi-disable service from piserial (813df45)
  * Import ks8851 tools from piserial (62e65cd)
  * Import factory-reset tools from piserial (9117a7e)
  * Import lan95xx tools from piserial (9159ffc)

  [ Philipp Rosenberger ]
  * Make examples available under MIT license
  * Add GPL-2.0 as license for most components of this repository
  * Re-add debianization

 -- Philipp Rosenberger <p.rosenberger@kunbus.com>  Tue, 06 Dec 2022 08:50:17 +0100

revpi-tools (1.0.16-1) stable; urgency=medium

  * Make the device matching in udev rules more robust
  * Remove executeable permission bits from none exec files
  * Use $(...) notation instead of legacy backticks
  * Use ip (iproute2) instead of ifconfig (net-tools)
  * Append -quriks to pileft/piright.service file names
  * Change links to revolutionpi.com
  * Add support for RevPi Core SE and Connect SE

 -- Philipp Rosenberger <p.rosenberger@kunbus.com>  Tue, 12 Apr 2022 15:17:46 +0200

revpi-tools (1.0.15-2) stable; urgency=medium

  [ Frank Pavlic ]
  * install revpi_buster_fix_pictory.sh to /usr/sbin

 -- Frank Pavlic <f.pavlic@kunbus.com>  Wed, 30 Jun 2021 07:27:15 +0200

revpi-tools (1.0.15-1) stable; urgency=medium

  [ Philipp Rosenberger ]
  * 50-revpi.rules: Match on *eth* rather then pieth*
  * FIX: ttyRS485 and ttyConBridge on kernels > 4.20

  [ Frank Pavlic ]
  * Fix PiCtory configuration after Upgrade

 -- Lino Sanfilippo <l.sanfilippo@kunbus.com>  Wed, 16 Jun 2021 17:19:10 +0200

revpi-tools (1.0.14-1) stable; urgency=medium

  [ Frank Pavlic ]
  * Node-RED fix package versions after Upgrade

 -- Lino Sanfilippo <l.sanfilippo@kunbus.com>  Thu, 25 Mar 2021 14:43:56 +0100

revpi-tools (1.0.13-1) stable; urgency=medium

  [ Zhi Han ]
  * trim the whitespaces in revpi.py
  * sos: change the path of config.rsc
  * add log and config files for codesys
  * Change the maintainer info to KUNBUS GmbH

  [ Philipp Rosenberger ]
  * Add a script to fix the stretch-backports pkgs

 -- Lino Sanfilippo <l.sanfilippo@kunbus.com>  Mon, 22 Mar 2021 15:24:15 +0100

revpi-tools (1.0.12-1) stable; urgency=medium

  * Add the function to enable user to change the ownership of
    the sosreport to current user.

 -- Kunbus <admin@kunbus.de>  Mon, 2 Sep 2020 10:15:00 +0200

revpi-tools (1.0.11-1) stable; urgency=medium

  * Add udev rules for RevPi Compact to allow sudo-less access
    for user pi to EERAM, LEDs and Analog Out.

 -- Kunbus <admin@kunbus.de>  Mon, 31 Aug 2020 10:15:00 +0200

revpi-tools (1.0.10-1) stable; urgency=medium

  * Add udev rules for RevPi Flat to create symlinks for
    RS485 ports, in congruence with what we're doing on the
    RevPi Compact and Connect.

 -- Kunbus <admin@kunbus.de>  Fri, 14 Aug 2020 13:00:00 +0200

revpi-tools (1.0.9-1) stable; urgency=medium

  * Add the sosreport plugin "revpi" to collect debugging
    information to assist the RevPi related problem locating.

 -- Kunbus <admin@kunbus.de>  Tue, 28 Jul 2020 11:15:00 +0200

revpi-tools (1.0.8-1) stable; urgency=medium

  * Fix access to undefined variable ret in enable_ and
    disable_relay_watchdog.py.

 -- Kunbus <admin@kunbus.de>  Tue, 23 Jun 2020 11:15:00 +0200

revpi-tools (1.0.7-1) stable; urgency=medium

  * Add udev rule for RevPi Compact to create symlink
    from /dev/ttyRS485 to /dev/ttyAMA0, in congruence
    with what we're doing on the RevPi Connect.

 -- Kunbus <admin@kunbus.de>  Wed, 01 Apr 2020 15:15:00 +0200

revpi-tools (1.0.6-1) stable; urgency=medium

  * Add udev rules to rename PiBridge Ethernet interfaces to
    "pileft" and "piright" for clarity.
  * Add udev rules and accompanying systemd services, script
    and manual page to shut down PiBridge Ethernet interfaces
    on the RevPi Core if no gateway is attached and the
    interrupt is polled.

 -- Kunbus <admin@kunbus.de>  Wed, 27 Feb 2019 15:30:00 +0100

revpi-tools (1.0.5-1) stable; urgency=medium

  * changed the example script and README file

 -- Kunbus <admin@kunbus.de>  Mon, 16 Jul 2018 10:15:00 +0200

revpi-tools (1.0.4-1) stable; urgency=medium

  * Previously the devnum of the FTDI chip was hardcoded in
    enable_relay_watchdog.py and disable_relay_watchdog.py
    even though it may change if USB devices are hotplugged.
    Amend the scripts as well as the README to determine the
    devnum from sysfs instead of hardcoding it.

 -- Kunbus <admin@kunbus.de>  Thu, 05 Jul 2018 16:30:00 +0200

revpi-tools (1.0.3-1) stable; urgency=medium

  * Amend revpi-connect-watchdog.sh to let watchdog trigger
    on loss of internet connectivity

 -- Kunbus <admin@kunbus.de>  Wed, 04 Jul 2018 12:45:00 +0200

revpi-tools (1.0.2-1) stable; urgency=medium

  * Fix README to configure !RE CBUS pin to TXDEN

 -- Kunbus <admin@kunbus.de>  Wed, 04 Apr 2018 14:30:00 +0200

revpi-tools (1.0.1-2) stable; urgency=medium

  * changed directory name

 -- Kunbus <admin@kunbus.de>  Tue, 20 Feb 2018 15:15:00 +0100

revpi-tools (1.0.0-1) stable; urgency=medium

  * Initial release

 -- Kunbus <admin@kunbus.de>  Tue, 20 Feb 2018 15:15:00 +0100
